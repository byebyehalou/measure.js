/*!
 * measure.js v2.0.0
 * Copyright (c) 2021 weijian zhu
 * Released under the MIT License.
*/(()=>{"use strict";var t={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.r(e);var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.top=e.top,this.left=e.left,this.width=e.width,this.height=e.height,this.right=e.right,this.bottom=e.bottom}var e,n,i;return e=t,(n=[{key:"colliding",value:function(t){return!(this.top>t.bottom||this.right<t.left||this.bottom<t.top||this.left>t.right)}},{key:"containing",value:function(t){return this.left<=t.left&&t.left<this.width&&this.top<=t.top&&t.top<this.height}},{key:"inside",value:function(t){return t.top<=this.top&&this.top<=t.bottom&&t.top<=this.bottom&&this.bottom<=t.bottom&&t.left<=this.left&&this.left<=t.right&&t.left<=this.right&&this.right<=t.right}},{key:"outsideAndNOIntersectionY",value:function(t){return this.left>t.right||t.left>this.right}},{key:"outsideAndNOIntersectionX",value:function(t){return this.top>t.bottom||t.top>this.bottom}},{key:"outsideAndNOIntersection",value:function(t){return this.outsideAndNOIntersectionY(t)&&this.outsideAndNOIntersectionX(t)}},{key:"outsideIncludeY",value:function(t){return this.right>=t.right&&this.left<=t.left}},{key:"outsideIncludeX",value:function(t){return this.bottom>=t.bottom&&this.top<=t.top}}])&&o(e.prototype,n),i&&o(e,i),t}();const i={DashedColor:"#5392FC",selectedDomBorderColor:"#ED5666",targetDomBorderColor:"#0A91FC",markerColor:"#ED5666"};function a(t,e,o){var n=e.width,i=e.height,a=e.top,r=e.left,s=document.createElement("div");if(s.classList.add("measure-js-".concat(t,"-placeholder")),s.style.border="1px solid ".concat(o),s.style.position="fixed",s.style.background="none",s.style.borderRadius="2px",s.style.padding="0",s.style.margin="0",s.style.width="".concat(n-1,"px"),s.style.height="".concat(i-1,"px"),s.style.top="".concat(a-.5,"px"),s.style.left="".concat(r-.5,"px"),s.style.pointerEvents="none",s.style.zIndex="9999",s.style.boxSizing="content-box",document.body.appendChild(s),"target"!==t){var l=document.createElement("span");l.classList.add("measure-js-".concat(t,"-dimension")),l.style.background=o,l.style.position="fixed",l.style.display="inline-block",l.style.color="#fff",l.style.padding="2px 4px",l.style.fontSize="10px";var c="",h=a;a<20?(a<0&&(h=0,c="↑"),l.style.borderRadius="2px 0 2px 0"):(l.style.transform="translateY(calc(-100% + 1px))",l.style.borderRadius="2px 2px 0 0"),l.style.top="".concat(h-1,"px"),l.style.left="".concat(r-1,"px"),l.innerText="".concat(c," ").concat(Math.round(n),"px × ").concat(Math.round(i),"px"),s.appendChild(l)}else!function(t){var e;null===(e=document.querySelector(".measure-js-".concat(t,"-dimension")))||void 0===e||e.remove()}("selected")}function r(t){var e;null===(e=document.querySelector(".measure-js-".concat(t,"-placeholder")))||void 0===e||e.remove()}function s(t,e,o,n,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none",s=document.createElement("span");if(s.style.backgroundColor=i.markerColor,s.style.position="fixed",s.classList.add("measure-js-marker"),s.style.width="".concat(t,"px"),s.style.height="".concat(e,"px"),s.style.pointerEvents="none",s.style.top="".concat(o,"px"),s.style.left="".concat(n,"px"),s.style.zIndex="9998",s.style.boxSizing="content-box",document.body.appendChild(s),parseInt(a)){var l=document.createElement("span");if(l.classList.add("measure-js-value"),l.style.backgroundColor=i.markerColor,l.style.color="white",l.style.fontSize="10px",l.style.display="inline-block",l.style.fontFamily="Helvetica, sans-serif",l.style.fontWeight="bold",l.style.borderRadius="20px",l.style.position="fixed",l.style.width="42px",l.style.lineHeight="15px",l.style.height="16px",l.style.textAlign="center",l.style.zIndex="10000",l.style.userSelect="none",l.innerText="".concat(parseInt(a),"px"),l.style.boxSizing="content-box",l.addEventListener("mouseenter",(function(){l.style.zIndex="10001"})),l.addEventListener("mouseleave",(function(){l.style.zIndex="10000"})),"x"===r){var c=o+e/2-7;c>document.documentElement.clientHeight-20&&(c=document.documentElement.clientHeight-20),c<0&&(c=6),l.style.top="".concat(c,"px"),l.style.left="".concat(n+6,"px")}else if("y"===r){var h=n+t/2-20;h>document.documentElement.clientWidth-48&&(h=document.documentElement.clientWidth-48),h<0&&(h=6),l.style.top="".concat(o+6,"px"),l.style.left="".concat(h,"px")}document.body.appendChild(l)}}function l(t,e,o,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"none",r=document.createElement("span");r.style.position="fixed",r.classList.add("measure-js-dashed-marker"),r.style.width="".concat(t,"px"),r.style.height="".concat(e,"px"),"x"===a&&(r.style.background="linear-gradient(to bottom, ".concat(i.DashedColor,", ").concat(i.DashedColor," 3px, transparent 3px, transparent)"),r.style.backgroundSize="100% 5px"),"y"===a&&(r.style.background="linear-gradient(to right, ".concat(i.DashedColor,", ").concat(i.DashedColor," 3px, transparent 3px, transparent)"),r.style.backgroundSize="5px 100%"),r.style.pointerEvents="none",r.style.top="".concat(o,"px"),r.style.left="".concat(n,"px"),r.style.zIndex="9998",r.style.boxSizing="content-box",document.body.appendChild(r)}function c(t,e,o,n){var i,a={top:function(){var o=Math.abs(t.top-e.top),i=Math.floor((Math.min(t.right,e.right)+Math.max(t.left,e.left))/2),a=Math.min(t.top,e.top);s(1,o,a,i,n,"x")},left:function(){var o=Math.abs(t.left-e.left),i=Math.floor((Math.min(t.bottom,e.bottom)+Math.max(t.top,e.top))/2),a=Math.min(t.left,e.left);s(o,1,i,a,n,"y")},right:function(){s(Math.abs(t.right-e.right),1,Math.floor((Math.min(t.bottom,e.bottom)+Math.max(t.top,e.top))/2),Math.min(t.right,e.right),n,"y")},bottom:function(){s(1,Math.abs(t.bottom-e.bottom),Math.min(t.bottom,e.bottom),Math.floor((Math.min(t.right,e.right)+Math.max(t.left,e.left))/2),n,"x")}};null===(i=a[o])||void 0===i||i.call(a)}function h(){document.querySelectorAll(".measure-js-marker").forEach((function(t){t.remove()})),document.querySelectorAll(".measure-js-dashed-marker").forEach((function(t){t.remove()})),document.querySelectorAll(".measure-js-value").forEach((function(t){t.remove()}))}function d(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var m,p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"_cssList",["color","backgroundColor","font","border-color"]),u(this,"_colorList",["color","backgroundColor","border-color"]),u(this,"_targetDom",null),u(this,"cssViewer",null),u(this,"isFreeze",!1),this.SetPosition=this.SetPosition.bind(this),this.initViewerWrap(),this.initMouseMoveEvent(),this.targetDom=e,this.initSelectColorEvent()}var e,o,n;return e=t,o=[{key:"targetDom",get:function(){return this._targetDom},set:function(t){this._targetDom=t,this.updateHtml(),this.initSelectColorEvent()}},{key:"show",value:function(){this.isFreeze=!1,this.cssViewer.style.display="block",this.initMouseMoveEvent()}},{key:"hide",value:function(){this.cssViewer.style.display="none",this.removeMouseMoveEvent()}},{key:"initViewerWrap",value:function(){var t=document.createElement("div");t.id="measure-js-css-viewer",this.cssViewer=t,document.body.appendChild(t)}},{key:"updateHtml",value:function(){var t=this,e=window.getComputedStyle(this.targetDom);this.cssViewer.innerHTML="\n            ".concat(this._cssList.map((function(o){return'\n                <div class="measure-js-css-viewer-item">\n                     <span>'.concat(o,"</span>\n                     <span>\n                       ").concat(t._colorList.includes(o)?'<label data-name="'.concat(o,'" style="background-color:').concat(e[o],'" class="measure-js-css-viewer-color"><input type="color" /></label>'):"","\n                       ").concat(e[o],"\n                       </span>\n                  </div>")})).join(""),"\n            ")}},{key:"initSelectColorEvent",value:function(){var t=this.targetDom;document.querySelectorAll(".measure-js-css-viewer-color").forEach((function(e){e.children[0].addEventListener("input",(function(o){var n;o.target.value,e.style.backgroundColor=o.target.value,t.style[null===(n=e.dataset)||void 0===n?void 0:n.name]=o.target.value}))}))}},{key:"initMouseMoveEvent",value:function(){window.addEventListener("mousemove",this.SetPosition,!1)}},{key:"removeMouseMoveEvent",value:function(){window.removeEventListener("mousemove",this.SetPosition,!1)}},{key:"freezePosition",value:function(){this.isFreeze=!0}},{key:"SetPosition",value:function(t){var e=this.cssViewer;if(e&&!this.isFreeze){var o=window.innerWidth,n=window.innerHeight,i=e.offsetWidth,a=e.offsetHeight,r=20;t.clientX+i+r>o?e.style.left=t.clientX-i-r+"px":e.style.left=t.clientX+r+"px",t.clientY+a+r>n?e.style.top=t.clientY-a-r+"px":e.style.top=t.clientY+r+"px"}}}],o&&d(e.prototype,o),n&&d(e,n),t}();var f,b,g,v,y,M=!1,x=null,w=null,k=!1,E=null;function C(t){var e,o;k&&(L(),E&&(clearTimeout(E),E=null)),"Alt"!==t.key||M||(t.preventDefault(),M=!0,I(),e=f,o=w,y=m?(m.targetDom=e,m.show(),m.SetPosition(o),m):((m=new p(e)).SetPosition(o),m),j(!0)),t.shiftKey&&(k=!0,y.freezePosition())}function S(t){"Alt"===t.key&&M&&(M=!1,E=setTimeout((function(){L(),y.hide()}),k?5e6:0))}function L(){r("selected"),r("target"),k=!1,f=null,g=null,h(),y.hide(),j(!1)}function D(t){w=t,x=t.target,M&&new Promise((function(t,e){if(x===f&&g)return h(),r("target"),r("selected"),I(),g=null,void y.show();x&&x!==f&&x!==g&&(g=x,r("target"),a("target",v=g.getBoundingClientRect(),i.targetDomBorderColor),y.hide(),t())})).then((function(){if(null!=f&&null!=g){var t,e,o,i,a=new n(b),r=new n(v);h(),a.containing(r)||a.inside(r)||a.colliding(r)?(t=Math.round(Math.abs(b.top-v.top)),e=Math.round(Math.abs(b.bottom-v.bottom)),o=Math.round(Math.abs(b.left-v.left)),i=Math.round(Math.abs(b.right-v.right)),c(a,r,"top","".concat(t,"px")),c(a,r,"bottom","".concat(e,"px")),c(a,r,"left","".concat(o,"px")),c(a,r,"right","".concat(i,"px"))):(t=Math.round(Math.abs(b.top-v.bottom)),e=Math.round(Math.abs(b.bottom-v.top)),o=Math.round(Math.abs(b.left-v.right)),i=Math.round(Math.abs(b.right-v.left)),function(t,e,o,n){if(t.outsideAndNOIntersection(e)){var i=(t.top+t.bottom)/2,a=t.left>e.right?e.right:t.right,r=Math.abs(t.left>e.right?t.left-e.right:e.left-t.right);s(r,1,i,a,"".concat(r,"px"),"y");var c=e.top>t.bottom?i:e.bottom;l(1,Math.abs(e.top>t.bottom?i-e.top:i-e.bottom),c,e.left>t.right?a+r:e.right,"x");var h=t.top>e.bottom?e.bottom:t.bottom,d=(t.left+t.right)/2,u=Math.abs(t.top>e.bottom?t.top-e.bottom:e.top-t.bottom);s(1,u,h,d,"".concat(u,"px"),"x");var m=e.top>t.bottom?u+t.bottom:e.bottom;l(Math.abs(e.left>t.right?d-e.left:d-e.right),1,m,e.left>t.right?d:e.right,"y")}else if(t.outsideAndNOIntersectionY(e)){if(!t.outsideAndNOIntersectionX(e)){var p=t.top>e.top?(e.bottom+t.top)/2:(t.bottom+e.top)/2;(t.outsideIncludeX(e)||e.outsideIncludeX(t))&&(p=(e.height>t.height?t.top+t.bottom:e.top+e.bottom)/2);var f=e.left>t.right?t.right:e.right,b=Math.min(Math.abs(e.left-t.right),Math.abs(e.right-t.left));s(b,1,p,f,"".concat(b,"px"),"y");var g=e.bottom>t.bottom?t.bottom:e.bottom,v=e.bottom>t.bottom?(t.left+t.right)/2:(e.left+e.right)/2,y=Math.abs(e.bottom-t.bottom);s(1,y,g,v,"".concat(y,"px"),"x");var M=Math.max(t.bottom,e.bottom);l(e.bottom>t.bottom?Math.min(Math.abs(v-e.left),Math.abs(v-e.right)):Math.min(Math.abs(v-t.left),Math.abs(v-t.right)),1,M,Math.min(v,e.right,t.right),"y");var x=e.top>t.top?t.top:e.top,w=e.top>t.top?(e.left+e.right)/2:(t.left+t.right)/2,k=Math.abs(e.top-t.top);s(1,k,x,w,"".concat(k,"px"),"x");var E=Math.min(t.top,e.top);l(e.top>t.top?Math.min(Math.abs(w-t.right),Math.abs(w-t.left)):Math.min(Math.abs(w-e.right),Math.abs(w-e.left)),1,E,Math.min(w,e.right,t.right),"y")}}else{var C=t.left>e.left?(e.right+t.left)/2:(t.right+e.left)/2;(t.outsideIncludeY(e)||e.outsideIncludeY(t))&&(C=(e.width>t.width?t.left+t.right:e.left+e.right)/2);var S=Math.min(Math.abs(e.top-t.bottom),Math.abs(e.bottom-t.top));s(1,S,e.top>t.bottom?t.bottom:e.bottom,C,"".concat(S,"px"),"x");var L=e.right>t.right?(t.top+t.bottom)/2:(e.top+e.bottom)/2,D=e.right>t.right?t.right:e.right,I=Math.abs(e.right-t.right);s(I,1,L,D,"".concat(I,"px"),"y");var j=Math.min(L,e.bottom,t.bottom);l(1,e.right>t.right?Math.min(Math.abs(L-e.top),Math.abs(L-e.bottom)):Math.min(Math.abs(L-t.top),Math.abs(L-t.bottom)),j,Math.max(t.right,e.right),"x");var z=e.left>t.left?(e.top+e.bottom)/2:(t.top+t.bottom)/2,A=e.left>t.left?t.left:e.left,H=Math.abs(e.left-t.left);s(H,1,z,A,"".concat(H,"px"),"y");var O=Math.min(z,e.bottom,t.bottom);l(1,e.left>t.left?Math.min(Math.abs(z-t.bottom),Math.abs(z-t.top)):Math.min(Math.abs(z-e.bottom),Math.abs(z-e.top)),O,Math.min(t.left,e.left),"x")}}(a,r,0,"".concat(t,"px")))}}))}function I(){x&&(f=x,r("selected"),a("selected",b=f.getBoundingClientRect(),i.selectedDomBorderColor))}function j(t){t?(window.addEventListener("DOMMouseScroll",z,!1),window.addEventListener("wheel",z,{passive:!1}),window.addEventListener("mousewheel",z,{passive:!1})):(window.removeEventListener("DOMMouseScroll",z),window.removeEventListener("wheel",z),window.removeEventListener("mousewheel",z))}function z(t){t.preventDefault()}({start:function(){if(document.body){if(window.$Measure)return window.removeEventListener("keydown",window.$Measure.keyDownHandler),window.removeEventListener("keyup",window.$Measure.keyUpHandler),window.removeEventListener("mousemove",window.$Measure.cursorMovedHandler),void(window.$Measure=null);window.$Measure={keyDownHandler:C,keyUpHandler:S,cursorMovedHandler:D},window.addEventListener("keydown",C),window.addEventListener("keyup",S),window.addEventListener("mousemove",D)}else console.warn("初始化measure.js插件失败")}}).start(),window.measure=e})();